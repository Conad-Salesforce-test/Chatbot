
<html>

      <style type="text/css">
            .chattaConNoi {
                  cursor: pointer;
            }
      </style>

      <h1></h1>

      <head>
            <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"/>
            <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=DM+Sans&display=swap" />
            <style>
                  h1 {
                        font-family: 'DM Sans', serif;
                        font-size: 72px;
                  }
            </style>
      </head>


      <body>

            <div class="chattaConNoi">
                  <a onclick="chatWithUs()">
                        Chatta con noi
                  </a>
            </div>

            <script>
                  function chatWithUs() {
                        
                        isPrivateMode().then(function (isPrivate) {
                        console.log('Browsing in private mode? ', isPrivate);
                        });
                        
                        document.getElementById("esw-fab").click();
                        var styleEmb = document.createElement('style');
                        styleEmb.type = 'text/css';
                        styleEmb.innerHTML = 'button.fab {visibility:visible;}';
                        document.getElementsByTagName('head')[0].appendChild(styleEmb);
                  }
                  

                  function isPrivateMode(): Promise<boolean> {
  return new Promise<boolean>(resolve => {
    const yes = () => resolve(true); // is in private mode
    const not = () => resolve(false); // not in private mode

    function detectChromeOpera(): boolean {
      // https://developers.google.com/web/updates/2017/08/estimating-available-storage-space
      const isChromeOpera = /(?=.*(opera|chrome)).*/i.test(navigator.userAgent) && navigator.storage?.estimate;
      if (isChromeOpera) {
        navigator.storage.estimate().then(({ quota }) => {
          quota < 120000000 ? yes() : not();
        });
      }
      return !!isChromeOpera;
    }

    function detectFirefox(): boolean {
      const isMozillaFirefox = 'MozAppearance' in document.documentElement.style;
      if (isMozillaFirefox) {
        if (indexedDB == null) yes();
        else {
          const db = indexedDB.open('inPrivate');
          db.onsuccess = not;
          db.onerror = yes;
        }
      }
      return isMozillaFirefox;
    }

    function detectSafari(): boolean {
      const isSafari = navigator.userAgent.match(/Version\/([0-9\._]+).*Safari/);
      if (isSafari) {
        const testLocalStorage = () => {
          try {
            if (localStorage.length) not();
            else {
              localStorage.setItem('inPrivate', '0');
              localStorage.removeItem('inPrivate');
              not();
            }
          } catch (_) {
            // Safari only enables cookie in private mode
            // if cookie is disabled, then all client side storage is disabled
            // if all client side storage is disabled, then there is no point
            // in using private mode
            navigator.cookieEnabled ? yes() : not();
          }
          return true;
        };

        const version = parseInt(isSafari[1], 10);
        if (version < 11) return testLocalStorage();
        try {
          (window as any).openDatabase(null, null, null, null);
          not();
        } catch (_) {
          yes();
        }
      }
      return !!isSafari;
    }

    function detectEdgeIE10(): boolean {
      const isEdgeIE10 = !window.indexedDB && (window.PointerEvent || window.MSPointerEvent);
      if (isEdgeIE10) yes();
      return !!isEdgeIE10;
    }

    // when a browser is detected, it runs tests for that browser
    // and skips pointless testing for other browsers.
    if (detectChromeOpera()) return;
    if (detectFirefox()) return;
    if (detectSafari()) return;
    if (detectEdgeIE10()) return;

    // default navigation mode
    return not();
  });
}
 
            </script>

            <script type='text/javascript' src='https://service.force.com/embeddedservice/menu/fab.min.js'></script>
            <script type='text/javascript'>
                  var initESW = function (gslbBaseURL) {
                        // Required if you want labels in a language that’s different from your user’s context.
                        embedded_svc.menu.settings.language = 'it'; //For example, enter 'en' or 'en-US'
                        embedded_svc.menu.chat.settings.paramUserId = "";

                        embedded_svc.menu.init(
                              'https://myconad2021--developmen.my.salesforce.com',
                              'https://d.la1-c1cs-fra.salesforceliveagent.com/chat',
                              gslbBaseURL,
                              '00D1x0000008eLM',
                              'Conad_Chat_Develop',
                              {
                                    pageName: 'PrechatSnip'
                              }
                        );
                        var styleEmb = document.createElement('style');
                        styleEmb.type = 'text/css';
                        styleEmb.innerHTML = '.embedded-service button#esw-fab{background-attachment: fixed;} .embedded-service .fab{background-attachment: fixed !important; //background-color:#f37a28;} .embedded-service .cp-conad-chat-start-submt {background-attachment:fixed} .embedded-service .ch-conad-chat-topbar-close//{background-attachment:fixed}';
                        document.getElementsByTagName('head')[0].appendChild(styleEmb);
                  };

                  if (!window.embedded_svc || !window.embedded_svc.menu) {
                        var s = document.createElement('script');
                        s.setAttribute('src', 'https://myconad2021--developmen.my.salesforce.com/embeddedservice/menu/fab.min.js');
                        s.onload = function () {
                              initESW(null);
                        };
                        document.body.appendChild(s);
                  } else {
                        initESW('https://service.force.com');
                  }
            </script>
      </body>

</html>
